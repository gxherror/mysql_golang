<!DOCTYPE html>
<!--update HTML without reload -->
<!--onkeyup="showresult(this.value)"-->
<!--  <p>total:<span id="result"></span></p>-->
<html>
<head>
<meta charset="utf-8" />
<title>Tiny Server</title>
<script>

function loadXMLDoc()
{
var xmlhttp;
document.getElementById("myDiv").innerHTML="修改后";
if (window.XMLHttpRequest)
    {// IE7+, Firefox, Chrome, Opera, Safari 代码
    xmlhttp=new XMLHttpRequest();
    }
else
    {// IE6, IE5 代码
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
}

//call when readySate change
xmlhttp.open("GET","/",true);
xmlhttp.send();
}


function addNumber() 
{
    var xmlhttp=new XMLHttpRequest();
    var url = "/adder/operate?Num1=" + document.getElementById("num1").value + "&Num2=" + document.getElementById("num2").value;
    document.getElementById("result").innerHTML=url;
    xmlhttp.open("GET", url=url, true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function ()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
          document.getElementById("result").innerHTML=xmlhttp.responseText;
        }
    }
    
}

function myFunction() {
    var x = document.getElementById("fname");
    x.value = x.value.toUpperCase();
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// IE7+, Firefox, Chrome, Opera, Safari 代码
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// IE6, IE5 代码
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttp.open("GET", "/", true);
    xmlhttp.send();
  }

</script>
</head>
<body>
<div id="myDiv"><h2>使用 AJAX 修改该文本内容</h2></div>
<button type="button" onclick="loadXMLDoc()">修改内容</button>
<input type="text" id="fname" onkeyup="myFunction()">
<p><input id="num1" type="text"  onkeyup="addNumber()"/></p>
<p><input id="num2" type="text"  onkeyup="addNumber()"/></p>
<p>答案: <span id="result"></span></p> 
</body>
</html>
